In this article I will describe the method I used to decode the X10 RF protocol with a Raspberry Pi.

Before starting you have to setup correctly a Raspberry and a RF receiver @ 433Mhtz as I described in a [previous post](https://web.archive.org/web/20180913045549/http://www.homautomation.org/2013/09/21/433mhtz-rf-communication-between-arduino-and-raspberry-pi/).

You can find all the code attached to this post on github: [https://github.com/vdemay/433Rpi](https://web.archive.org/web/20180913045549/https://github.com/vdemay/433Rpi)

## Needed hardware

#### ![300px-RaspberryPi](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/300px-RaspberryPi.jpg)

####  A **Raspberry Pi**

 **Website**: [http://www.raspberrypi.org/](https://web.archive.org/web/20180913045549/http://www.raspberrypi.org/)

 **Price**: less than 50$ ([Amazon](https://web.archive.org/web/20180913045549/http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=raspberry%20pi&linkCode=ur2&rh=n%3A172282%2Ck%3Araspberry%20pi&tag=homauomatio03-20&url=search-alias%3Delectronics)![](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/ir.gif))

Mine is a B Model

[![rf433k](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/rf433k-300x225.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2013/09/rf433k.jpg)

####  433Mhz RF link kit

 **Price**: less than 5$ ([Amazon](https://web.archive.org/web/20180913045549/http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=raspberry%20pi&linkCode=ur2&rh=n%3A172282%2Ck%3Araspberry%20pi&tag=homauomatio03-20&url=search-alias%3Delectronics)![](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/ir.gif))

## Build the hardware to snif RF

Now You get the right hardware you have to make a simple breakout:

[![RPi](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/RPi.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2013/09/RPi.jpg)

The Antenna should be a 17cm long simple wire. Here on my exemple there are both emitter and receiver connected to the Raspberry. Obviously only the receiver is needed

[![photo](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/photo-1024x768.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/photo.jpg)

## Install the software

Now it’s to prepare the software. My Raspberry is running a [Raspbian](https://web.archive.org/web/20180913045549/http://www.raspbian.org/). Once ssh’ed on it, install [wiringPi (a lib to help to manage GPIO)](https://web.archive.org/web/20180913045549/https://projects.drogon.net/raspberry-pi/wiringpi/)

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">pi<span style="color: #000000; font-weight: bold;">@</span>raspberrypi ~ $ <span style="color: #c20cb9; font-weight: bold;">git clone</span> git:<span style="color: #000000; font-weight: bold;">//</span>git.drogon.net<span style="color: #000000; font-weight: bold;">/</span>wiringPi
...
pi<span style="color: #000000; font-weight: bold;">@</span>raspberrypi ~ $ <span style="color: #7a0874; font-weight: bold;">cd</span> wiringPi<span style="color: #000000; font-weight: bold;">/</span>wiringPi
pi<span style="color: #000000; font-weight: bold;">@</span>raspberrypi ~<span style="color: #000000; font-weight: bold;">/</span>wiringPi<span style="color: #000000; font-weight: bold;">/</span>wiringPi $ <span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">su</span>
...
root<span style="color: #000000; font-weight: bold;">@</span>raspberrypi:<span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>pi<span style="color: #000000; font-weight: bold;">/</span>wiringPi<span style="color: #000000; font-weight: bold;">/</span>wiringPi<span style="color: #666666; font-style: italic;"># ./build</span></pre></td></tr></tbody></table>

Test the install

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">root<span style="color: #000000; font-weight: bold;">@</span>raspberrypi:<span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>pi<span style="color: #000000; font-weight: bold;">/</span>wiringPi<span style="color: #000000; font-weight: bold;">/</span>wiringPi<span style="color: #666666; font-style: italic;"># gpio readall</span>
+----------+-Rev1-+------+--------+------+-------+
<span style="color: #000000; font-weight: bold;">|</span> wiringPi <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000; font-weight: bold;">|</span> Phys <span style="color: #000000; font-weight: bold;">|</span> Name   <span style="color: #000000; font-weight: bold;">|</span> Mode <span style="color: #000000; font-weight: bold;">|</span> Value <span style="color: #000000; font-weight: bold;">|</span>
+----------+------+------+--------+------+-------+
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">0</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">17</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">11</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">0</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">1</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">18</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">12</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">1</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">2</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">21</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">13</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">2</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">3</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">22</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">15</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">3</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">4</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">23</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">16</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">4</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">5</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">24</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">18</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">5</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">6</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">25</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">22</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">6</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">7</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">4</span>  <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">7</span>  <span style="color: #000000; font-weight: bold;">|</span> GPIO <span style="color: #000000;">7</span> <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> Low   <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">8</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">0</span>  <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">3</span>  <span style="color: #000000; font-weight: bold;">|</span> SDA    <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>      <span style="color: #000000;">9</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">1</span>  <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">5</span>  <span style="color: #000000; font-weight: bold;">|</span> SCL    <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">10</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">8</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">24</span>  <span style="color: #000000; font-weight: bold;">|</span> CE0    <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">11</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">7</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">26</span>  <span style="color: #000000; font-weight: bold;">|</span> CE1    <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">12</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">10</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">19</span>  <span style="color: #000000; font-weight: bold;">|</span> MOSI   <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">13</span>   <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">9</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">21</span>  <span style="color: #000000; font-weight: bold;">|</span> MISO   <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">14</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">11</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">23</span>  <span style="color: #000000; font-weight: bold;">|</span> SCLK   <span style="color: #000000; font-weight: bold;">|</span> IN   <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">15</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">14</span>  <span style="color: #000000; font-weight: bold;">|</span>   <span style="color: #000000;">8</span>  <span style="color: #000000; font-weight: bold;">|</span> TxD    <span style="color: #000000; font-weight: bold;">|</span> ALT0 <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
<span style="color: #000000; font-weight: bold;">|</span>     <span style="color: #000000;">16</span>   <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">15</span>  <span style="color: #000000; font-weight: bold;">|</span>  <span style="color: #000000;">10</span>  <span style="color: #000000; font-weight: bold;">|</span> RxD    <span style="color: #000000; font-weight: bold;">|</span> ALT0 <span style="color: #000000; font-weight: bold;">|</span> High  <span style="color: #000000; font-weight: bold;">|</span>
+----------+------+------+--------+------+-------+</pre></td></tr></tbody></table>

Ok, we are ready to go

## Start to decode rf signal

First of all you have to know that signal received by the receiver is based on logical state changes. Here is a typical exemple  of signal received via RF:

[![signal](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/signal.png)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/signal.png)

So the idea is to mesure time between each signal state changes (0 to 1 or 1 to 0) in order try to decode the binary message. It’s also necessary to start to measure signal change only after the signal started and not during the noise period.

Most of protocol are based on a lock to indicate the start of the signal. A Lock is a long period (ms) when the emitter send a 0 or a 1 (or a sequence of long 0 and 1) to indicate the signal will start:

[![lock](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/lock.png)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/lock.png)

So first of all we’ll try to handle a lock programmatically with a simple C++ code: The goal of the soft is to attach interrupt each time the signal is falling or rising in order to mesure the time needed for a signal change. If the time to change is long, we can expect a lock is received.

## Write a soft to try to understand x10 rf protocol

The aim here is to decode signal send by this device :

  
[X10 3 Unit Slimline Wireless Wall Switch + Dimming![](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/ir.1.gif)  
![41WZKMXA2WL](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/41WZKMXA2WL-300x300.jpg)  
$15 on Amazon](https://web.archive.org/web/20180913045549/http://www.amazon.com/gp/product/B00022OCDW/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B00022OCDW&linkCode=as2&tag=homauomatio03-20)

 

Here is a program waiting for a long period and then display duration of 0 and 1

```
<span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;wiringPi.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;iostream&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;stdio.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;sys/time.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;time.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;stdlib.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;sched.h&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#include</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">&lt;sstream&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">using</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">namespace</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> std</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//store data into array </span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">#define</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">30</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> durations</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">[</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">MAX_CHANGE_TO_KEEP</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">];</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp;<br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> a</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">){</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; cout </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> a </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> longToString</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mylong</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">){</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mylong</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">.</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">str</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">();</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> intToString</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> myint</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">){</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> myint</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">.</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">str</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">();</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> measure2String</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">){</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">.</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">str</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">();</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> handleInterrupt</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">()</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp;<br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> changeCount</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> lastTime</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> lockPassed</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> time </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> micros</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">();</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; duration </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> time </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">-</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> lastTime</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//wait for lock</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">duration </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">11000</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> lockPassed </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">==</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> <br>&nbsp; &nbsp; changeCount </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">"Lock started"</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">);</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> cout </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> endl</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">measure2String</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">));</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">cout </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> endl</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//store duration</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; durations</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">[</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">++]</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockPassed </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">1</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> <br><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">lockPassed </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">!=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">// REST OF DATA</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//log(measure2String(duration, digitalRead(2)));</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">changeCount </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&gt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">// store 100 change Max</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//ended</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; changeCount </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">"==============================="</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">);</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">for</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> i</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> i </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> i</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">i</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">++)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">measure2String</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">durations</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">[</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">i</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">]));</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; log</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="str"><span class="str"><span class="str"><span class="str">" "</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">);</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; cout </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> endl</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//store duration</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; durations</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">[</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">++]</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; lastTime </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">=</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> time</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> &nbsp;<br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br><br><br></span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> main</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">{</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">wiringPiSetup</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">()</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">==</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">-</span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">1</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">)</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp;</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">0</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//attach interrupt to changes on the pin</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; wiringPiISR</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="lit"><span class="lit"><span class="lit"><span class="lit">2</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">,</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> INT_EDGE_BOTH</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">,</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"> </span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">&amp;</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln">handleInterrupt</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">);</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="com"><span class="com"><span class="com"><span class="com">//interrupt will handle changes</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">while</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">(</span></span></span></span><span class="kwd"><span class="kwd"><span class="kwd"><span class="kwd">true</span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">);</span></span></span></span><span class="pln"><span class="pln"><span class="pln"><span class="pln"><br></span></span></span></span><span class="pun"><span class="pun"><span class="pun"><span class="pun">}</span></span></span></span>
```

[This Gist](https://web.archive.org/web/20170906220447/https://github.com/vdemay/433Rpi/blob/master/searchLock.cpp) brought to you by [gist-it](https://web.archive.org/web/20170906220447/http://gist-it.appspot.com). [view raw](https://web.archive.org/web/20170906220447/https://github.com/vdemay/433Rpi/raw/master/searchLock.cpp) [searchLock.cpp](https://web.archive.org/web/20170906220447/https://github.com/vdemay/433Rpi/blob/master/searchLock.cpp)

prettyPrint();Here is the output when I press a button:

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">Lock started
<span style="color: #000000;">11224</span>
===============================<span style="color: #000000;">11224</span> <span style="color: #000000;">316</span> <span style="color: #000000;">25</span> <span style="color: #000000;">139</span> <span style="color: #000000;">89</span> <span style="color: #000000;">286</span> <span style="color: #000000;">64</span> <span style="color: #000000;">25</span> <span style="color: #000000;">126</span> <span style="color: #000000;">82</span> <span style="color: #000000;">14</span> <span style="color: #000000;">136</span> <span style="color: #000000;">60</span> <span style="color: #000000;">128</span> <span style="color: #000000;">21</span> <span style="color: #000000;">100</span> <span style="color: #000000;">109</span> <span style="color: #000000;">88</span> <span style="color: #000000;">22</span> <span style="color: #000000;">74</span> <span style="color: #000000;">30</span> <span style="color: #000000;">75</span> <span style="color: #000000;">22</span> <span style="color: #000000;">92</span> <span style="color: #000000;">23</span> <span style="color: #000000;">74</span> <span style="color: #000000;">27</span> <span style="color: #000000;">82</span> <span style="color: #000000;">41</span> <span style="color: #000000;">56</span> 
Lock started
<span style="color: #000000;">11293</span>
===============================<span style="color: #000000;">11293</span> <span style="color: #000000;">327</span> <span style="color: #000000;">15</span> <span style="color: #000000;">141</span> <span style="color: #000000;">82</span> <span style="color: #000000;">86</span> <span style="color: #000000;">98</span> <span style="color: #000000;">79</span> <span style="color: #000000;">15</span> <span style="color: #000000;">94</span> <span style="color: #000000;">86</span> <span style="color: #000000;">16</span> <span style="color: #000000;">83</span> <span style="color: #000000;">17</span> <span style="color: #000000;">88</span> <span style="color: #000000;">15</span> <span style="color: #000000;">79</span> <span style="color: #000000;">17</span> <span style="color: #000000;">78</span> <span style="color: #000000;">16</span> <span style="color: #000000;">82</span> <span style="color: #000000;">15</span> <span style="color: #000000;">95</span> <span style="color: #000000;">16</span> <span style="color: #000000;">78</span> <span style="color: #000000;">15</span> <span style="color: #000000;">57</span> <span style="color: #000000;">24</span> <span style="color: #000000;">256</span> <span style="color: #000000;">99</span> 
Lock started
<span style="color: #000000;">26783</span>
===============================<span style="color: #000000;">26783</span> <span style="color: #000000;">390</span> <span style="color: #000000;">8083</span> <span style="color: #000000;">4069</span> <span style="color: #000000;">471</span> <span style="color: #000000;">532</span> <span style="color: #000000;">470</span> <span style="color: #000000;">1537</span> <span style="color: #000000;">466</span> <span style="color: #000000;">1553</span> <span style="color: #000000;">448</span> <span style="color: #000000;">547</span> <span style="color: #000000;">466</span> <span style="color: #000000;">540</span> <span style="color: #000000;">471</span> <span style="color: #000000;">528</span> <span style="color: #000000;">480</span> <span style="color: #000000;">527</span> <span style="color: #000000;">480</span> <span style="color: #000000;">536</span> <span style="color: #000000;">469</span> <span style="color: #000000;">1535</span> <span style="color: #000000;">467</span> <span style="color: #000000;">547</span> <span style="color: #000000;">461</span> <span style="color: #000000;">558</span> <span style="color: #000000;">457</span> <span style="color: #000000;">1536</span> <span style="color: #000000;">467</span> <span style="color: #000000;">1534</span> 
Lock started
<span style="color: #000000;">27166</span>
===============================<span style="color: #000000;">27166</span> <span style="color: #000000;">8096</span> <span style="color: #000000;">4068</span> <span style="color: #000000;">464</span> <span style="color: #000000;">531</span> <span style="color: #000000;">482</span> <span style="color: #000000;">1524</span> <span style="color: #000000;">469</span> <span style="color: #000000;">1540</span> <span style="color: #000000;">464</span> <span style="color: #000000;">560</span> <span style="color: #000000;">447</span> <span style="color: #000000;">560</span> <span style="color: #000000;">447</span> <span style="color: #000000;">555</span> <span style="color: #000000;">454</span> <span style="color: #000000;">551</span> <span style="color: #000000;">460</span> <span style="color: #000000;">539</span> <span style="color: #000000;">470</span> <span style="color: #000000;">1532</span> <span style="color: #000000;">469</span> <span style="color: #000000;">552</span> <span style="color: #000000;">453</span> <span style="color: #000000;">561</span> <span style="color: #000000;">450</span> <span style="color: #000000;">1550</span> <span style="color: #000000;">452</span> <span style="color: #000000;">1549</span> <span style="color: #000000;">458</span> 
Lock started
<span style="color: #000000;">27155</span>
===============================<span style="color: #000000;">27155</span> <span style="color: #000000;">8107</span> <span style="color: #000000;">4077</span> <span style="color: #000000;">457</span> <span style="color: #000000;">543</span> <span style="color: #000000;">465</span> <span style="color: #000000;">1528</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1533</span> <span style="color: #000000;">467</span> <span style="color: #000000;">549</span> <span style="color: #000000;">462</span> <span style="color: #000000;">538</span> <span style="color: #000000;">476</span> <span style="color: #000000;">539</span> <span style="color: #000000;">459</span> <span style="color: #000000;">555</span> <span style="color: #000000;">452</span> <span style="color: #000000;">552</span> <span style="color: #000000;">460</span> <span style="color: #000000;">1534</span> <span style="color: #000000;">473</span> <span style="color: #000000;">535</span> <span style="color: #000000;">471</span> <span style="color: #000000;">540</span> <span style="color: #000000;">469</span> <span style="color: #000000;">1545</span> <span style="color: #000000;">456</span> <span style="color: #000000;">1550</span> <span style="color: #000000;">451</span> 
Lock started
<span style="color: #000000;">27160</span>
===============================<span style="color: #000000;">27160</span> <span style="color: #000000;">8110</span> <span style="color: #000000;">4072</span> <span style="color: #000000;">458</span> <span style="color: #000000;">552</span> <span style="color: #000000;">451</span> <span style="color: #000000;">1543</span> <span style="color: #000000;">470</span> <span style="color: #000000;">1523</span> <span style="color: #000000;">478</span> <span style="color: #000000;">541</span> <span style="color: #000000;">467</span> <span style="color: #000000;">552</span> <span style="color: #000000;">453</span> <span style="color: #000000;">555</span> <span style="color: #000000;">452</span> <span style="color: #000000;">553</span> <span style="color: #000000;">455</span> <span style="color: #000000;">556</span> <span style="color: #000000;">450</span> <span style="color: #000000;">1546</span> <span style="color: #000000;">466</span> <span style="color: #000000;">545</span> <span style="color: #000000;">464</span> <span style="color: #000000;">545</span> <span style="color: #000000;">461</span> <span style="color: #000000;">1541</span> <span style="color: #000000;">457</span> <span style="color: #000000;">1545</span> <span style="color: #000000;">459</span> 
Lock started
<span style="color: #000000;">26445</span>
===============================<span style="color: #000000;">26445</span> <span style="color: #000000;">800</span> <span style="color: #000000;">8007</span> <span style="color: #000000;">4089</span> <span style="color: #000000;">459</span> <span style="color: #000000;">550</span> <span style="color: #000000;">455</span> <span style="color: #000000;">1552</span> <span style="color: #000000;">450</span> <span style="color: #000000;">1542</span> <span style="color: #000000;">466</span> <span style="color: #000000;">550</span> <span style="color: #000000;">459</span> <span style="color: #000000;">542</span> <span style="color: #000000;">466</span> <span style="color: #000000;">546</span> <span style="color: #000000;">460</span> <span style="color: #000000;">642</span> <span style="color: #000000;">149</span> <span style="color: #000000;">24</span> <span style="color: #000000;">148</span> <span style="color: #000000;">639</span> <span style="color: #000000;">449</span> <span style="color: #000000;">1573</span> <span style="color: #000000;">405</span> <span style="color: #000000;">561</span> <span style="color: #000000;">440</span> <span style="color: #000000;">552</span> <span style="color: #000000;">479</span> <span style="color: #000000;">1524</span> 
Lock started
<span style="color: #000000;">27230</span>
===============================<span style="color: #000000;">27230</span> <span style="color: #000000;">8055</span> <span style="color: #000000;">4054</span> <span style="color: #000000;">448</span> <span style="color: #000000;">594</span> <span style="color: #000000;">408</span> <span style="color: #000000;">1604</span> <span style="color: #000000;">417</span> <span style="color: #000000;">1539</span> <span style="color: #000000;">447</span> <span style="color: #000000;">612</span> <span style="color: #000000;">418</span> <span style="color: #000000;">620</span> <span style="color: #000000;">396</span> <span style="color: #000000;">561</span> <span style="color: #000000;">440</span> <span style="color: #000000;">567</span> <span style="color: #000000;">440</span> <span style="color: #000000;">513</span> <span style="color: #000000;">484</span> <span style="color: #000000;">1592</span> <span style="color: #000000;">421</span> <span style="color: #000000;">521</span> <span style="color: #000000;">483</span> <span style="color: #000000;">534</span> <span style="color: #000000;">464</span> <span style="color: #000000;">1537</span> <span style="color: #000000;">465</span> <span style="color: #000000;">1610</span> <span style="color: #000000;">416</span> 
Lock started
<span style="color: #000000;">27152</span>
===============================<span style="color: #000000;">27152</span> <span style="color: #000000;">8115</span> <span style="color: #000000;">4066</span> <span style="color: #000000;">468</span> <span style="color: #000000;">534</span> <span style="color: #000000;">472</span> <span style="color: #000000;">1522</span> <span style="color: #000000;">477</span> <span style="color: #000000;">1541</span> <span style="color: #000000;">462</span> <span style="color: #000000;">548</span> <span style="color: #000000;">464</span> <span style="color: #000000;">542</span> <span style="color: #000000;">465</span> <span style="color: #000000;">548</span> <span style="color: #000000;">455</span> <span style="color: #000000;">558</span> <span style="color: #000000;">451</span> <span style="color: #000000;">550</span> <span style="color: #000000;">461</span> <span style="color: #000000;">1535</span> <span style="color: #000000;">476</span> <span style="color: #000000;">527</span> <span style="color: #000000;">479</span> <span style="color: #000000;">552</span> <span style="color: #000000;">454</span> <span style="color: #000000;">1531</span> <span style="color: #000000;">472</span> <span style="color: #000000;">1543</span> <span style="color: #000000;">456</span> 
Lock started
<span style="color: #000000;">24229</span>
===============================<span style="color: #000000;">24229</span> <span style="color: #000000;">2968</span> <span style="color: #000000;">8043</span> <span style="color: #000000;">4106</span> <span style="color: #000000;">455</span> <span style="color: #000000;">559</span> <span style="color: #000000;">444</span> <span style="color: #000000;">1571</span> <span style="color: #000000;">448</span> <span style="color: #000000;">1523</span> <span style="color: #000000;">473</span> <span style="color: #000000;">533</span> <span style="color: #000000;">474</span> <span style="color: #000000;">549</span> <span style="color: #000000;">455</span> <span style="color: #000000;">553</span> <span style="color: #000000;">458</span> <span style="color: #000000;">550</span> <span style="color: #000000;">457</span> <span style="color: #000000;">557</span> <span style="color: #000000;">449</span> <span style="color: #000000;">1544</span> <span style="color: #000000;">463</span> <span style="color: #000000;">556</span> <span style="color: #000000;">457</span> <span style="color: #000000;">551</span> <span style="color: #000000;">458</span> <span style="color: #000000;">1535</span> <span style="color: #000000;">463</span> <span style="color: #000000;">1550</span> 
Lock started
<span style="color: #000000;">15903</span>
===============================<span style="color: #000000;">15903</span> <span style="color: #000000;">18727</span> <span style="color: #000000;">347</span> <span style="color: #000000;">251</span> <span style="color: #000000;">182</span> <span style="color: #000000;">15</span> <span style="color: #000000;">293</span> <span style="color: #000000;">14</span> <span style="color: #000000;">125</span> <span style="color: #000000;">14</span> <span style="color: #000000;">238</span> <span style="color: #000000;">132</span> <span style="color: #000000;">13</span> <span style="color: #000000;">132</span> <span style="color: #000000;">210</span> <span style="color: #000000;">13</span> <span style="color: #000000;">216</span> <span style="color: #000000;">13</span> <span style="color: #000000;">342</span> <span style="color: #000000;">13</span> <span style="color: #000000;">149</span> <span style="color: #000000;">169</span> <span style="color: #000000;">14</span> <span style="color: #000000;">167</span> <span style="color: #000000;">6422</span> <span style="color: #000000;">14</span> <span style="color: #000000;">476</span> <span style="color: #000000;">321</span> <span style="color: #000000;">15</span> <span style="color: #000000;">187</span> 
Lock started
<span style="color: #000000;">11785</span>
===============================<span style="color: #000000;">11785</span> <span style="color: #000000;">333</span> <span style="color: #000000;">75</span> <span style="color: #000000;">15</span> <span style="color: #000000;">81</span> <span style="color: #000000;">95</span> <span style="color: #000000;">16</span> <span style="color: #000000;">67</span> <span style="color: #000000;">24</span> <span style="color: #000000;">126</span> <span style="color: #000000;">103</span> <span style="color: #000000;">96</span> <span style="color: #000000;">16</span> <span style="color: #000000;">59</span> <span style="color: #000000;">23</span> <span style="color: #000000;">109</span> <span style="color: #000000;">91</span> <span style="color: #000000;">17</span> <span style="color: #000000;">62</span> <span style="color: #000000;">23</span> <span style="color: #000000;">98</span> <span style="color: #000000;">17</span> <span style="color: #000000;">89</span> <span style="color: #000000;">92</span> <span style="color: #000000;">15</span> <span style="color: #000000;">70</span> <span style="color: #000000;">23</span> <span style="color: #000000;">88</span> <span style="color: #000000;">16</span> <span style="color: #000000;">70</span></pre></td></tr></tbody></table>

The program detect noise or signal from elsewhere, but when I press a button lot of output with a first values around 2700 are displayed. So we will suppose the lock code started by a value between around 2700us. If we look at the second value and third value when the first one is around 2700 we get something around 800us for the second value and 400us for the third one. So the lock seems to be:

-   2700us
-   800us
-   400us

I stopped to consider the lock at this point because other values are much smaller. **Reminder** each value is a duration of a 0 state or of a 1 state. So If we imagine the first state is 0 we get the following lock:

[![lockVal](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/lockVal.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/lockVal.jpg) so now we will try to understand the rest of the data taking as exemple the following

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">Lock started
<span style="color: #000000;">27152</span>
===============================<span style="color: #000000;">27152</span> <span style="color: #000000;">8115</span> <span style="color: #000000;">4066</span> <span style="color: #000000;">468</span> <span style="color: #000000;">534</span> <span style="color: #000000;">472</span> <span style="color: #000000;">1522</span> <span style="color: #000000;">477</span> <span style="color: #000000;">1541</span> <span style="color: #000000;">462</span> <span style="color: #000000;">548</span> <span style="color: #000000;">464</span> <span style="color: #000000;">542</span> <span style="color: #000000;">465</span> <span style="color: #000000;">548</span> <span style="color: #000000;">455</span> <span style="color: #000000;">558</span> <span style="color: #000000;">451</span> <span style="color: #000000;">550</span> <span style="color: #000000;">461</span> <span style="color: #000000;">1535</span> <span style="color: #000000;">476</span> <span style="color: #000000;">527</span> <span style="color: #000000;">479</span> <span style="color: #000000;">552</span> <span style="color: #000000;">454</span> <span style="color: #000000;">1531</span> <span style="color: #000000;">472</span> <span style="color: #000000;">1543</span> <span style="color: #000000;">456</span></pre></td></tr></tbody></table>

As each value is duration of a 0 or a 1, the rest of the data should be consider  by pair (RF binary is often encoded with different duration between hight level and low level):

```
468 534
472 1522
477 1541
462 548
464 542
465 548
455 558
451 550
461 1535
476 527
479 552
<span style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px;">552&nbsp;</span><span style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px;">1531
</span><span style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px;">472&nbsp;</span><span style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px;">1543
</span>456...
```

It seems we get a pattern : sometimes 450 and 550 and sometimes 4500 and 1500. Wahoo we get something : [![lockVal+value](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/lockVal+value.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/lockVal+value.jpg)   Binary is usually encoded over RF on the following way  

-   0 encoded with hight and low level with the same duration
-   1 encoded with hight level longer than low level or hight level shorter than the low one.

 So here it seems we get 0110000010011… [![lockVal+value+decode](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/lockVal+value+decode.jpg)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/lockVal+value+decode.jpg)   At this point we are not sure to get all needed changes to decode the signal. So I will update the soft to take into account our new knowledge:  

-   Handle the 3 changes making the lock (with a big tolerance)
-   Dump more changes to try to find out the right needed number (70)

```
<span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;wiringPi.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;iostream&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;stdio.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;sys/time.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;time.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;stdlib.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;sched.h&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">#include</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">&lt;sstream&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">using</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">namespace</span></span></span><span class="pln"><span class="pln"><span class="pln"> std</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="com"><span class="com"><span class="com">//store data into array </span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">//state</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> states</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="lit"><span class="lit"><span class="lit">67</span></span></span><span class="pun"><span class="pun"><span class="pun">];</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="com"><span class="com"><span class="com">//length</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="lit"><span class="lit"><span class="lit">67</span></span></span><span class="pun"><span class="pun"><span class="pun">];</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span><span class="pln"><span class="pln"><span class="pln"> log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> a</span></span></span><span class="pun"><span class="pun"><span class="pun">){</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; cout </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> a </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> endl</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> longToString</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span><span class="pln"><span class="pln"><span class="pln"> mylong</span></span></span><span class="pun"><span class="pun"><span class="pun">){</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> mylong</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">.</span></span></span><span class="pln"><span class="pln"><span class="pln">str</span></span></span><span class="pun"><span class="pun"><span class="pun">();</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> intToString</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> myint</span></span></span><span class="pun"><span class="pun"><span class="pun">){</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> myint</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">.</span></span></span><span class="pln"><span class="pln"><span class="pln">str</span></span></span><span class="pun"><span class="pun"><span class="pun">();</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> measure2String</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> value</span></span></span><span class="pun"><span class="pun"><span class="pun">){</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">string</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystring</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> value</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">" : "</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span><span class="pln"><span class="pln"><span class="pln"> mystream</span></span></span><span class="pun"><span class="pun"><span class="pun">.</span></span></span><span class="pln"><span class="pln"><span class="pln">str</span></span></span><span class="pun"><span class="pun"><span class="pun">();</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span><span class="pln"><span class="pln"><span class="pln"> handleInterrupt</span></span></span><span class="pun"><span class="pun"><span class="pun">()</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp;<br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> changeCount</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">unsigned</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span><span class="pln"><span class="pln"><span class="pln"> lastTime</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//1 X10</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">static</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">long</span></span></span><span class="pln"><span class="pln"><span class="pln"> time </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> micros</span></span></span><span class="pun"><span class="pun"><span class="pun">();</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; duration </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> time </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="pln"><span class="pln"><span class="pln"> lastTime</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//wait for lock</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration </span></span></span><span class="pun"><span class="pun"><span class="pun">&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">25000</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln"> lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">//X10 lock started</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; changeCount </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">0</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="str"><span class="str"><span class="str">"X10 lock started"</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">measure2String</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> digitalRead</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pun"><span class="pun"><span class="pun">)));</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span><span class="pun"><span class="pun"><span class="pun">++]</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln"> lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">//X10 second bit</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration </span></span></span><span class="pun"><span class="pun"><span class="pun">&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">8000</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">10000</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="str"><span class="str"><span class="str">"X10 lock continue"</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">measure2String</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> digitalRead</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pun"><span class="pun"><span class="pun">)));</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span><span class="pun"><span class="pun"><span class="pun">++]</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln"> lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">//x10 third bit</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration </span></span></span><span class="pun"><span class="pun"><span class="pun">&gt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">4000</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">5000</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">//ok passed</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="str"><span class="str"><span class="str">"X10 lock continue 2"</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">measure2String</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">duration</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> digitalRead</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pun"><span class="pun"><span class="pun">)));</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span><span class="pun"><span class="pun"><span class="pun">++]</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">!=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">// REST OF DATA</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//Store duration and state</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//log(measure2String(duration, digitalRead(2)));</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount </span></span></span><span class="pun"><span class="pun"><span class="pun">&gt;=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">70</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//ended</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; changeCount </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">0</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="str"><span class="str"><span class="str">"==============================="</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//decode</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">lockType </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="com"><span class="com"><span class="com">// X10</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//ignore first 3 changes</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">for</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> i</span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="lit"><span class="lit"><span class="lit">3</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"> i</span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;=</span></span></span><span class="lit"><span class="lit"><span class="lit">69</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"> i</span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln">i</span></span></span><span class="pun"><span class="pun"><span class="pun">+</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">i</span></span></span><span class="pun"><span class="pun"><span class="pun">]*</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">i</span></span></span><span class="pun"><span class="pun"><span class="pun">+</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">])</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">"1"</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="str"><span class="str"><span class="str">"0"</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span></span><span class="pun"><span class="pun"><span class="pun">&lt;&lt;</span></span></span><span class="pln"><span class="pln"><span class="pln"> endl</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">else</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; durations</span></span></span><span class="pun"><span class="pun"><span class="pun">[</span></span></span><span class="pln"><span class="pln"><span class="pln">changeCount</span></span></span><span class="pun"><span class="pun"><span class="pun">++]</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> duration</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; lastTime </span></span></span><span class="pun"><span class="pun"><span class="pun">=</span></span></span><span class="pln"><span class="pln"><span class="pln"> time</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"> &nbsp;<br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br><br><br></span></span></span><span class="kwd"><span class="kwd"><span class="kwd">int</span></span></span><span class="pln"><span class="pln"><span class="pln"> main</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">void</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">{</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">if</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="pln"><span class="pln"><span class="pln">wiringPiSetup</span></span></span><span class="pun"><span class="pun"><span class="pun">()</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">==</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">-</span></span></span><span class="lit"><span class="lit"><span class="lit">1</span></span></span><span class="pun"><span class="pun"><span class="pun">)</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp;</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">return</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="lit"><span class="lit"><span class="lit">0</span></span></span><span class="pun"><span class="pun"><span class="pun">;</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span></span><span class="com"><span class="com"><span class="com">//attach interrupt to changes on the pin</span></span></span><span class="pln"><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; wiringPiISR</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="lit"><span class="lit"><span class="lit">2</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> INT_EDGE_BOTH</span></span></span><span class="pun"><span class="pun"><span class="pun">,</span></span></span><span class="pln"><span class="pln"><span class="pln"> </span></span></span><span class="pun"><span class="pun"><span class="pun">&amp;</span></span></span><span class="pln"><span class="pln"><span class="pln">handleInterrupt</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br><br>&nbsp; </span></span></span><span class="kwd"><span class="kwd"><span class="kwd">while</span></span></span><span class="pun"><span class="pun"><span class="pun">(</span></span></span><span class="kwd"><span class="kwd"><span class="kwd">true</span></span></span><span class="pun"><span class="pun"><span class="pun">);</span></span></span><span class="pln"><span class="pln"><span class="pln"><br></span></span></span><span class="pun"><span class="pun"><span class="pun">}</span></span></span>
```

[This Gist](https://web.archive.org/web/20170906222944/https://github.com/vdemay/433Rpi/blob/master/simpleSniff.cpp) brought to you by [gist-it](https://web.archive.org/web/20170906222944/http://gist-it.appspot.com). [view raw](https://web.archive.org/web/20170906222944/https://github.com/vdemay/433Rpi/raw/master/simpleSniff.cpp) [simpleSniff.cpp](https://web.archive.org/web/20170906222944/https://github.com/vdemay/433Rpi/blob/master/simpleSniff.cpp)

prettyPrint();  
Now when I press a button I get

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">Lock started
<span style="color: #000000;">26983</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">8011</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4106</span>
===============================<span style="color: #000000;">26983</span> <span style="color: #000000;">8011</span> <span style="color: #000000;">4106</span> <span style="color: #000000;">442</span> <span style="color: #000000;">581</span> <span style="color: #000000;">381</span> <span style="color: #000000;">1513</span> <span style="color: #000000;">492</span> <span style="color: #000000;">1530</span> <span style="color: #000000;">443</span> <span style="color: #000000;">511</span> <span style="color: #000000;">481</span> <span style="color: #000000;">559</span> <span style="color: #000000;">448</span> <span style="color: #000000;">542</span> <span style="color: #000000;">500</span> <span style="color: #000000;">500</span> <span style="color: #000000;">461</span> <span style="color: #000000;">515</span> <span style="color: #000000;">480</span> <span style="color: #000000;">1537</span> <span style="color: #000000;">467</span> <span style="color: #000000;">505</span> <span style="color: #000000;">482</span> <span style="color: #000000;">515</span> <span style="color: #000000;">486</span> <span style="color: #000000;">1512</span> <span style="color: #000000;">527</span> <span style="color: #000000;">1505</span> <span style="color: #000000;">446</span> <span style="color: #000000;">1496</span> <span style="color: #000000;">481</span> <span style="color: #000000;">1546</span> <span style="color: #000000;">460</span> <span style="color: #000000;">1492</span> <span style="color: #000000;">481</span> <span style="color: #000000;">552</span> <span style="color: #000000;">450</span> <span style="color: #000000;">525</span> <span style="color: #000000;">476</span> <span style="color: #000000;">546</span> <span style="color: #000000;">461</span> <span style="color: #000000;">509</span> <span style="color: #000000;">487</span> <span style="color: #000000;">543</span> <span style="color: #000000;">461</span> <span style="color: #000000;">512</span> <span style="color: #000000;">485</span> <span style="color: #000000;">522</span> <span style="color: #000000;">480</span> <span style="color: #000000;">546</span> <span style="color: #000000;">466</span> <span style="color: #000000;">1507</span> <span style="color: #000000;">473</span> <span style="color: #000000;">1556</span> <span style="color: #000000;">434</span> <span style="color: #000000;">1509</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1546</span> <span style="color: #000000;">454</span> <span style="color: #000000;">1508</span> <span style="color: #000000;">483</span> <span style="color: #000000;">1538</span> <span style="color: #000000;">449</span> <span style="color: #000000;">1500</span> <span style="color: #000000;">481</span> <span style="color: #000000;">1547</span> <span style="color: #000000;">453</span> <span style="color: #000000;">26967</span> <span style="color: #000000;">7997</span> 
Lock started
<span style="color: #000000;">26948</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">8065</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4063</span>
===============================<span style="color: #000000;">26948</span> <span style="color: #000000;">8065</span> <span style="color: #000000;">4063</span> <span style="color: #000000;">467</span> <span style="color: #000000;">520</span> <span style="color: #000000;">452</span> <span style="color: #000000;">1525</span> <span style="color: #000000;">463</span> <span style="color: #000000;">1504</span> <span style="color: #000000;">480</span> <span style="color: #000000;">522</span> <span style="color: #000000;">480</span> <span style="color: #000000;">524</span> <span style="color: #000000;">535</span> <span style="color: #000000;">473</span> <span style="color: #000000;">477</span> <span style="color: #000000;">521</span> <span style="color: #000000;">472</span> <span style="color: #000000;">537</span> <span style="color: #000000;">465</span> <span style="color: #000000;">1509</span> <span style="color: #000000;">481</span> <span style="color: #000000;">524</span> <span style="color: #000000;">479</span> <span style="color: #000000;">518</span> <span style="color: #000000;">479</span> <span style="color: #000000;">1514</span> <span style="color: #000000;">477</span> <span style="color: #000000;">1527</span> <span style="color: #000000;">465</span> <span style="color: #000000;">1512</span> <span style="color: #000000;">470</span> <span style="color: #000000;">1518</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1511</span> <span style="color: #000000;">480</span> <span style="color: #000000;">520</span> <span style="color: #000000;">481</span> <span style="color: #000000;">527</span> <span style="color: #000000;">476</span> <span style="color: #000000;">520</span> <span style="color: #000000;">481</span> <span style="color: #000000;">526</span> <span style="color: #000000;">480</span> <span style="color: #000000;">518</span> <span style="color: #000000;">476</span> <span style="color: #000000;">522</span> <span style="color: #000000;">479</span> <span style="color: #000000;">525</span> <span style="color: #000000;">475</span> <span style="color: #000000;">526</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1525</span> <span style="color: #000000;">469</span> <span style="color: #000000;">1509</span> <span style="color: #000000;">477</span> <span style="color: #000000;">1518</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1514</span> <span style="color: #000000;">471</span> <span style="color: #000000;">1534</span> <span style="color: #000000;">460</span> <span style="color: #000000;">1512</span> <span style="color: #000000;">475</span> <span style="color: #000000;">1509</span> <span style="color: #000000;">478</span> <span style="color: #000000;">1524</span> <span style="color: #000000;">471</span> <span style="color: #000000;">26941</span> <span style="color: #000000;">8029</span></pre></td></tr></tbody></table>

If you look at the 2 last changes, it seems to be the beginning of a new lock. If we count the number of changes we get :

```
 Number_of_dump - Lock_at_begging - beggining_of_lock_at_the_end = 70 - 3 - 2 = 65.
```

As wee need 2 changes to make a bit, I suppose that 421 before the beggining of the lock at the end is useless. Let update the program

-   We have to reduce the number of change to sniff to 67 (3 locks + 64 changes — bits)
-   And we are going to display bits instead of duration

   

```
<span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;wiringPi.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;iostream&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;stdio.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;sys/time.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;time.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;stdlib.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;sched.h&gt;</span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#include</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">&lt;sstream&gt;</span></span><span class="pln"><span class="pln"><br><br><br></span></span><span class="kwd"><span class="kwd">using</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">namespace</span></span><span class="pln"><span class="pln"> std</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br><br></span></span><span class="com"><span class="com">//store data into array </span></span><span class="pln"><span class="pln"><br></span></span><span class="com"><span class="com">#define</span></span><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP </span></span><span class="lit"><span class="lit">67</span></span><span class="pln"><span class="pln"><br></span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">MAX_CHANGE_TO_KEEP</span></span><span class="pun"><span class="pun">];</span></span><span class="pln"><span class="pln"><br>&nbsp;<br></span></span><span class="kwd"><span class="kwd">void</span></span><span class="pln"><span class="pln"> log</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> a</span></span><span class="pun"><span class="pun">){</span></span><span class="pln"><span class="pln"><br>&nbsp; cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> a </span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br></span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br></span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> longToString</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">long</span></span><span class="pln"><span class="pln"> mylong</span></span><span class="pun"><span class="pun">){</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> mystring</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> mylong</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">return</span></span><span class="pln"><span class="pln"> mystream</span></span><span class="pun"><span class="pun">.</span></span><span class="pln"><span class="pln">str</span></span><span class="pun"><span class="pun">();</span></span><span class="pln"><span class="pln"><br></span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br></span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> intToString</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> myint</span></span><span class="pun"><span class="pun">){</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> mystring</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> myint</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">return</span></span><span class="pln"><span class="pln"> mystream</span></span><span class="pun"><span class="pun">.</span></span><span class="pln"><span class="pln">str</span></span><span class="pun"><span class="pun">();</span></span><span class="pln"><span class="pln"><br></span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br></span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">long</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">){</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">string</span></span><span class="pln"><span class="pln"> mystring</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; stringstream mystream</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; mystream </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">return</span></span><span class="pln"><span class="pln"> mystream</span></span><span class="pun"><span class="pun">.</span></span><span class="pln"><span class="pln">str</span></span><span class="pun"><span class="pun">();</span></span><span class="pln"><span class="pln"><br></span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br></span></span><span class="kwd"><span class="kwd">void</span></span><span class="pln"><span class="pln"> handleInterrupt</span></span><span class="pun"><span class="pun">()</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp;<br>&nbsp; </span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">unsigned</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">unsigned</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> changeCount</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">unsigned</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">long</span></span><span class="pln"><span class="pln"> lastTime</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br><br>&nbsp; </span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> lockPassed</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">static</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> lockChange</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br><br>&nbsp; </span></span><span class="kwd"><span class="kwd">long</span></span><span class="pln"><span class="pln"> time </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> micros</span></span><span class="pun"><span class="pun">();</span></span><span class="pln"><span class="pln"><br>&nbsp; duration </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> time </span></span><span class="pun"><span class="pun">-</span></span><span class="pln"><span class="pln"> lastTime</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br><br>&nbsp; </span></span><span class="com"><span class="com">//wait for lock</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">lockChange </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">26000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">28000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> lockPassed </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"> <br>&nbsp; &nbsp; changeCount </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="str"><span class="str">"Lock started"</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"> cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">duration</span></span><span class="pun"><span class="pun">));</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="com"><span class="com">//store duration</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">changeCount</span></span><span class="pun"><span class="pun">++]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">lockChange </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">1</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">7000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">9000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> lockPassed </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="str"><span class="str">"Lock started 2"</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"> cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">duration</span></span><span class="pun"><span class="pun">));</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">changeCount</span></span><span class="pun"><span class="pun">++]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">2</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">lockChange </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">2</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">3000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> duration </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">5000</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> lockPassed </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="str"><span class="str">"Lock started 3"</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"> cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">duration</span></span><span class="pun"><span class="pun">));</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">changeCount</span></span><span class="pun"><span class="pun">++]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">3</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockPassed </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"> </span></span><span class="com"><span class="com">//lock is finished</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br><br>&nbsp; </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">lockPassed </span></span><span class="pun"><span class="pun">!=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"> </span></span><span class="com"><span class="com">// REST OF DATA</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="com"><span class="com">//log(measure2String(duration));</span></span><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">changeCount </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"> </span></span><span class="com"><span class="com">// store 100 change Max</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//ended</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockPassed </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; changeCount </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="str"><span class="str">"==============================="</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//start after the lock</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">for</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> i</span></span><span class="pun"><span class="pun">=</span></span><span class="lit"><span class="lit">3</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"> i </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> MAX_CHANGE_TO_KEEP</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"> i</span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">2</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">((</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">-</span></span><span class="lit"><span class="lit">3</span></span><span class="pun"><span class="pun">)%</span></span><span class="lit"><span class="lit">16</span></span><span class="pun"><span class="pun">==</span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//space each 8bits</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">" "</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">350</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">550</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">450</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">650</span></span><span class="pln"><span class="pln"> &nbsp;</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//a 0</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">"0"</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">350</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">550</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&gt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">1400</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;&amp;</span></span><span class="pln"><span class="pln"> durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">1600</span></span><span class="pln"><span class="pln"> &nbsp;</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//a 0</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">"1"</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//errror reset</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log </span></span><span class="pun"><span class="pun">(</span></span><span class="str"><span class="str">"EROOR"</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">]));</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> </span></span><span class="str"><span class="str">" "</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">measure2String</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">i</span></span><span class="pun"><span class="pun">+</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">]));</span></span><span class="pln"><span class="pln">cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; changeCount </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lockPassed </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="kwd"><span class="kwd">break</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; cout </span></span><span class="pun"><span class="pun">&lt;&lt;</span></span><span class="pln"><span class="pln"> endl</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//store duration</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; durations</span></span><span class="pun"><span class="pun">[</span></span><span class="pln"><span class="pln">changeCount</span></span><span class="pun"><span class="pun">++]</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> duration</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"> </span></span><span class="kwd"><span class="kwd">else</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; </span></span><span class="com"><span class="com">//wait for another </span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; changeCount </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockChange </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; lockPassed </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br>&nbsp; lastTime </span></span><span class="pun"><span class="pun">=</span></span><span class="pln"><span class="pln"> time</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"> &nbsp;<br></span></span><span class="pun"><span class="pun">}</span></span><span class="pln"><span class="pln"><br><br><br><br></span></span><span class="kwd"><span class="kwd">int</span></span><span class="pln"><span class="pln"> main</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">void</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">{</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">if</span></span><span class="pun"><span class="pun">(</span></span><span class="pln"><span class="pln">wiringPiSetup</span></span><span class="pun"><span class="pun">()</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">==</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">-</span></span><span class="lit"><span class="lit">1</span></span><span class="pun"><span class="pun">)</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp;</span></span><span class="kwd"><span class="kwd">return</span></span><span class="pln"><span class="pln"> </span></span><span class="lit"><span class="lit">0</span></span><span class="pun"><span class="pun">;</span></span><span class="pln"><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span class="com"><span class="com">//attach interrupt to changes on the pin</span></span><span class="pln"><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; wiringPiISR</span></span><span class="pun"><span class="pun">(</span></span><span class="lit"><span class="lit">2</span></span><span class="pun"><span class="pun">,</span></span><span class="pln"><span class="pln"> INT_EDGE_BOTH</span></span><span class="pun"><span class="pun">,</span></span><span class="pln"><span class="pln"> </span></span><span class="pun"><span class="pun">&amp;</span></span><span class="pln"><span class="pln">handleInterrupt</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="com"><span class="com">//interrupt will handle changes</span></span><span class="pln"><span class="pln"><br>&nbsp; </span></span><span class="kwd"><span class="kwd">while</span></span><span class="pun"><span class="pun">(</span></span><span class="kwd"><span class="kwd">true</span></span><span class="pun"><span class="pun">);</span></span><span class="pln"><span class="pln"><br></span></span><span class="pun"><span class="pun">}</span></span>
```

[This Gist](https://web.archive.org/web/20170929050103/https://github.com/vdemay/433Rpi/blob/master/X10RFSnifferBit.cpp) brought to you by [gist-it](https://web.archive.org/web/20170929050103/http://gist-it.appspot.com). [view raw](https://web.archive.org/web/20170929050103/https://github.com/vdemay/433Rpi/raw/master/X10RFSnifferBit.cpp) [X10RFSnifferBit.cpp](https://web.archive.org/web/20170929050103/https://github.com/vdemay/433Rpi/blob/master/X10RFSnifferBit.cpp)

prettyPrint();

Now we get the following

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;">Lock started
<span style="color: #000000;">26937</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">7995</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4096</span>
=============================== 01100000 <span style="color: #000000;">10011111</span> 00000000 <span style="color: #000000;">11111111</span>
Lock started
<span style="color: #000000;">26926</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">8047</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4091</span>
=============================== 01100000 <span style="color: #000000;">10011111</span> 00000000 <span style="color: #000000;">11111111</span>
Lock started
<span style="color: #000000;">26929</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">7862</span>
Lock started
<span style="color: #000000;">26899</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">8065</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4081</span>
=============================== 01100000 <span style="color: #000000;">10011111</span> 00100000 <span style="color: #000000;">11011111</span>
Lock started
<span style="color: #000000;">26925</span>
Lock started <span style="color: #000000;">2</span>
<span style="color: #000000;">8049</span>
Lock started <span style="color: #000000;">3</span>
<span style="color: #000000;">4068</span>
=============================== 01100000 <span style="color: #000000;">10011111</span> 00100000 <span style="color: #000000;">11011111</span></pre></td></tr></tbody></table>

So we get bytes. It seems that the second byte is the complment from the first one and fourth one is the complement from the third one.

## How to decode the binary signal

Decoding the binary signal is more tricky. So I asked my frind google to help me with this task. Here is the link needed to continue:

[http://www.printcapture.com/files/X10\_RF\_Receiver.pdf](https://web.archive.org/web/20180913045549/http://www.printcapture.com/files/X10_RF_Receiver.pdf)

First all, it seems our reversed engineering is ok: [![Capture d’écran 2014-04-21 à 11.30.31](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/Capture-d%E2%80%99%C3%A9cran-2014-04-21-%C3%A0-11.30.31.png)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/Capture-d’écran-2014-04-21-à-11.30.31.png) And the interesting section at this point is the table of byte values and meaning: [![Capture d’écran 2014-04-21 à 11.32.54](How%20to%20decode%20X10%20RF%20protocol%20-%20Homautomation/Capture-d%E2%80%99%C3%A9cran-2014-04-21-%C3%A0-11.32.54.png)](https://web.archive.org/web/20180913045549/http://www.homautomation.org/wp-content/uploads/2014/04/Capture-d’écran-2014-04-21-à-11.32.54.png)   So if the next phase, we’ll try to transform our binary signal to a real value: I firstly did it only for Axx command. I’ll try to continue to maintain the code here: [https://github.com/vdemay/433Rpi](https://web.archive.org/web/20180913045549/https://github.com/vdemay/433Rpi) All you need to decode X10 Protocol is here: [https://github.com/vdemay/433Rpi/blob/master/SignalReciever](https://web.archive.org/web/20180913045549/http://www.homautomation.org/2014/04/25/how-to-decode-x10-rf-protocol//%20https://github.com/vdemay/433Rpi/blob/master/SignalReciever)

```
<span class="com">#include</span><span class="pln"> </span><span class="str">"X10Protocol.h"</span><span class="pln"><br></span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;sstream&gt;</span><span class="pln"><br></span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span><span class="pln"><br></span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln"><br></span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln"><br><br>X10Protocol</span><span class="pun">::</span><span class="pln">X10Protocol</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">int</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">lockPassed</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">int</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">handleLock</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">26000</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">28000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> duration</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">7000</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">9000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> duration</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">3000</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> duration</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPassed</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">reset</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">int</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">readAndStoreChange</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPassed</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">reset</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//Store</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">&lt;</span><span class="pln"> X10PROTOCOL_MAX_CHANGES</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon</span><span class="pun">++]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> duration</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">reset</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span><span class="kwd">int</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">hasData</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">readAsByteArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> bytes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//reset </span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="lit">4</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//read</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="lit">4</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> pos </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">3</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j</span><span class="pun">*</span><span class="lit">8</span><span class="pun">);</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j</span><span class="pun">*</span><span class="lit">8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">8</span><span class="pun">*</span><span class="lit">2</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changesToBit</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j</span><span class="pun">*</span><span class="lit">8</span><span class="pun">)],</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+(</span><span class="pln">j</span><span class="pun">*</span><span class="lit">8</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">]);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytes</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">|=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pos </span><span class="pun">--;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> bytes</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">readAsHumanReadable</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">bytes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">readAsByteArray</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//check complement</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">bytes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> bytes</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0xff</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> bytes</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0xff</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//data are ok</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">96</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A1 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">32</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A1 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A2 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">48</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A2 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A3 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">40</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A3 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A4 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">56</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A4 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">64</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A5 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">96</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A5 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">80</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A6 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">112</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A6 OFF"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">72</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A7 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A7 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">88</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A8 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">120</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A8 OFF"</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">136</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A BRIGHT 005"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">152</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A DIM 005"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">100</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A9 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">32</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A9 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A10 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">48</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A10 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A11 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">40</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A11 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A12 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">56</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A12 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">64</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A13 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">96</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A13 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">80</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A14 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">112</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A14 OFF"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">72</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A15 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A15 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">88</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A16 ON"</span><span class="pun">;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">120</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"A16 OFF"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"TODO"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"INVALID DATA"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="str">"NO DATA"</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> <br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">void</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">displayHasBinary</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">3</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> X10PROTOCOL_MAX_CHANGES</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">i</span><span class="pun">-</span><span class="lit">3</span><span class="pun">)%</span><span class="lit">16</span><span class="pun">==</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//space each 8bits</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changesToBit</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">changes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"NO DATA"</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="kwd">void</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">displayHasHexa</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">bytes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">readAsByteArray</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf</span><span class="pun">(</span><span class="str">"%02x "</span><span class="pun">,</span><span class="pln"> bytes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0xff</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br><br></span><span class="kwd">void</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">displayHasHumanReadable</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">hasReceivedData </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">readAsHumanReadable</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="com">/** -------------------------- PRIVATE --------------------------- **/</span><span class="pln"><br><br></span><span class="kwd">int</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">changesToBit</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> duration1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> duration2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration1 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">350</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration1 </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">650</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; duration2 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">350</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration2 </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">650</span><span class="pln"> &nbsp;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">duration1 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">350</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration1 </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">650</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; duration2 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1350</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> duration2 </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1650</span><span class="pln"> &nbsp;</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//defautly says 1</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br><br></span><span class="kwd">void</span><span class="pln"> X10Protocol</span><span class="pun">::</span><span class="pln">reset</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">lockPosition </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">globalPositon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">}</span>
```

[This Gist](https://web.archive.org/web/20170929135654/https://github.com/vdemay/433Rpi/blob/master/SignalReciever/X10Protocol.cpp) brought to you by [gist-it](https://web.archive.org/web/20170929135654/http://gist-it.appspot.com). [view raw](https://web.archive.org/web/20170929135654/https://github.com/vdemay/433Rpi/raw/master/SignalReciever/X10Protocol.cpp) [SignalReciever/X10Protocol.cpp](https://web.archive.org/web/20170929135654/https://github.com/vdemay/433Rpi/blob/master/SignalReciever/X10Protocol.cpp)

prettyPrint();

And here is the output now:

<table><tbody><tr><td class="code"><pre class="bash" style="font-family:monospace;"> 01100000 <span style="color: #000000;">10011111</span> 00000000 <span style="color: #000000;">11111111</span>
<span style="color: #000000;">60</span> 9f 00 ff 
A1 ON
 01100000 <span style="color: #000000;">10011111</span> 00000000 <span style="color: #000000;">11111111</span>
<span style="color: #000000;">60</span> 9f 00 ff 
A1 ON
 01100000 <span style="color: #000000;">10011111</span> 00110000 <span style="color: #000000;">11001111</span>
<span style="color: #000000;">60</span> 9f <span style="color: #000000;">30</span> cf 
A2 OFF
 01100000 <span style="color: #000000;">10011111</span> 00110000 <span style="color: #000000;">11001111</span>
<span style="color: #000000;">60</span> 9f <span style="color: #000000;">30</span> cf 
A2 OFF
 01100000 <span style="color: #000000;">10011111</span> 00001000 <span style="color: #000000;">11110111</span>
<span style="color: #000000;">60</span> 9f 08 f7 
A3 ON
 01100000 <span style="color: #000000;">10011111</span> 00001000 <span style="color: #000000;">11110111</span>
<span style="color: #000000;">60</span> 9f 08 f7 
A3 ON
 01100000 <span style="color: #000000;">10011111</span> 00100000 <span style="color: #000000;">11011111</span>
<span style="color: #000000;">60</span> 9f <span style="color: #000000;">20</span> <span style="color: #c20cb9; font-weight: bold;">df</span> 
A1 OFF
 01100000 <span style="color: #000000;">10011111</span> <span style="color: #000000;">10011000</span> 01100111
<span style="color: #000000;">60</span> 9f <span style="color: #000000;">98</span> <span style="color: #000000;">67</span> 
A DIM 005</pre></td></tr></tbody></table>